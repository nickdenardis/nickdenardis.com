(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{400:function(e,n,t){"use strict";t.r(n);var s=t(4),o=Object(s.a)({},(function(){var e=this,n=e._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("p",[e._v("One thing that we struggle with in our server environment as many others do is doing load balancing and being able to sync session data between all the machines. Having one dedicated session space or server can be an option but that can get a little messy or expensive. So we added MySQL Sessions to the Simpl framework and it is easy as pie to use.")]),e._v(" "),n("p",[e._v("Originally adopted from "),n("a",{attrs:{href:"http://www.josephcrawford.com/php-articles/going-deep-inside-php-sessions/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Joseph Crawford"),n("OutboundLink")],1),e._v(" but implemented completely in Simpl. Josephs was great except it seemed to be connected to a larger whole. The bits and pieces were there for the session but they just needed to be combined with a framework. Below is a fully featured example working and usable.")]),e._v(" "),n("p",[e._v("Prerequisits:")]),e._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"http://code.google.com/p/phpsimpl/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PHPSimpl"),n("br"),e._v(" "),n("OutboundLink")],1)])]),e._v(" "),n("li",[n("p",[e._v("MySQL Database Connection")])]),e._v(" "),n("li",[n("p",[e._v("“session” Table")]),e._v(" "),n("p",[e._v("CREATE TABLE `session` ("),n("br"),e._v("\n`ses_id` varchar(32) NOT NULL,"),n("br"),e._v("\n`last_access` int(12) unsigned NOT NULL,"),n("br"),e._v("\n`ses_start` int(12) unsigned NOT NULL,"),n("br"),e._v("\n`ses_value` text NOT NULL,"),n("br"),e._v("\nPRIMARY KEY  (`ses_id`)"),n("br"),e._v("\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='Used to store the sessions data';")])])]),e._v(" "),n("p",[e._v("Usage Steps:")]),e._v(" "),n("ol",[n("li",[n("p",[e._v("Download and copy Simpl to the web server.")])]),e._v(" "),n("li",[n("p",[e._v("Define some base items")]),e._v(" "),n("p",[e._v("// Directories"),n("br"),e._v('\n// Always Include trailing slash "/" in Direcories'),n("br"),e._v("\ndefine('DIR_ABS', '/usr/local/www/');"),n("br"),e._v("\ndefine('FS_SIMPL', DIR_ABS . 'simpl/');"),n("br"),e._v("\ndefine('FS_CACHE', DIR_ABS . 'cache/');// Enable Database Sessions"),n("br"),e._v("\ndefine('DB_SESSIONS', true);// Database Connection Options"),n("br"),e._v("\ndefine('DB_USER', 'username');"),n("br"),e._v("\ndefine('DB_HOST', 'localhost');"),n("br"),e._v("\ndefine('DB_PASS', 'password');"),n("br"),e._v("\ndefine('DB_DEFAULT', 'site_data');")])]),e._v(" "),n("li",[n("p",[e._v("Include the framework")]),e._v(" "),n("p",[e._v("// Simpl Framework"),n("br"),e._v("\ninclude_once(FS_SIMPL . 'simpl.php');")])]),e._v(" "),n("li",[n("p",[e._v("Connect to the database")]),e._v(" "),n("p",[e._v("// Make the DB Connection"),n("br"),e._v("\n$db = new DB;"),n("br"),e._v("\n$db->Connect();")])]),e._v(" "),n("li",[n("p",[e._v("Use the $_SESSION super global just as you normally would and PHPSimpl does all the work for you.")])])]),e._v(" "),n("p",[e._v("The only modification may be the page cannot close the database connection since the _SESSION variable has to be written after the page is completely loaded and thus must still have the connection available.")]),e._v(" "),n("p",[e._v("Simpl and the $db object to all the hard work of redirecting the session data and pulling it from the database. No need to call a session_start() or even interact with the session table.")]),e._v(" "),n("p",[e._v("If you are interested in what the Session class looks like here is the source code:"),n("br"),e._v(" "),n("a",{attrs:{href:"http://phpsimpl.googlecode.com/svn/trunk/simpl/session.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("Session.php"),n("OutboundLink")],1)])])}),[],!1,null,null,null);n.default=o.exports}}]);